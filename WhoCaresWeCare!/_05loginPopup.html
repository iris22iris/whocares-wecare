<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>租賃設備訂單查詢</title>
    <link rel="stylesheet" href="_05loginPopup.css"> 
     <!-- bootstrap --> 
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <!-- icon -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
     integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
     crossorigin="anonymous" referrerpolicy="no-referrer" />
     <!-- sweetAlert -->
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>  
     
     <script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
     <script defer src="https://use.fontawesome.com/4e44561671.js"></script>
     
</head>
<body>
    <iframe src="index.html" frameborder="0" width="100%" height="100px" scrolling= "no"
    ></iframe>

        <div class="col-12 d-flex justify-content-evenly align-items-center">
            <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#exampleModal">
                會員登入
            </button>

<!-- modal fade  star  登入小視窗 開始 bg-warning text-dark-->                                        
    <div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog col-12">
                <div class="modal-content">
                    <h2 class="modal-title1 p-3 col-12 d-flex justify-content-evenly " id="exampleModalLabel">登入會員</h2>                                                                
                        <div class="containerPOPUP p-3  ">
                            <form class="row g-3 form">
                                <div class="col-3 justify-content-evenly p-1  d-flex align-items-center ">
                                    <label for="inputAccount" class="form-label">會員帳號 :</label>
                                </div>
                                <div class="col-9">
                                    <input type="text" class="form-control  " id="inputAccount">
                                </div>
                                <div class="col-3 justify-content-evenly p-1  d-flex align-items-center">
                                    <label for="inputAccount" class="form-label">會員密碼 :</label>
                                </div>
                                <div class="col-9">
                                    <input type="text" class="form-control" id="inputAccount">
                                </div>

                                <div class="form__group  ">
                                    <label>
                                        <input style="margin-left:120px;" type="checkbox" name="remember" > 記住帳密  
                                    </label>
                                </div>
                                <div class="col-3">
                                    <label for="inputAccount" class="form-label justify-content-evenly p-1  d-flex align-items-center">請輸入驗證碼:</label>
                                </div>
                                <div class="col-3">
                                    <input type="text" class="form-control" id="inputAccount">
                                </div>
                                <div class="col-6">
                                    <input type="text" class="form-control" id="inputAccount">
                                </div>
               
                                <div class="modal-footer d-flex justify-content-center align-items-center ">                                   
                                    <div class=" ">                       
                                        <div class="button   d-flex justify-content-center align-items-center ">
                                            <input type="button" class="btn btn-primary justify-content-center " value="Login"
                                            onClick="timedMsg(this)">
                                        </div>   
                          
                                        <nav class="hyperlink col-12 d-flex justify-content-center ">
                                    
                                            <div class="Hyperlinkbutton    ">
                                                <a href="" class="sideBtn">尚未註冊</a>
                                                <a href="" class="sideBtn">忘記密碼</a>
                                            </div>
                                        </nav>
                                    </div>
                                </div>
                            </form>        
                        </div>                                             
                </div>
        </div>
    </div>


    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>php圖形驗證碼</title>
   
    <script>
        function refresh_code(){ 
            document.getElementById("imgcode").src="captcha.php"; 
        } 
    </script>
    


    <form name="form1" method="post" action="./checkcode.php">
        <p>請輸入下圖字樣：</p><p><img id="imgcode" src="captcha.php" onclick="refresh_code()" /><br />
           點擊圖片可以更換驗證碼
        </p>
        <input type="text" name="checkword" size="10" maxlength="10" />
        <input type="submit" name="Submit" value="送出" />
    </form>



    <?php
    if(!isset($_SESSION)){ session_start(); } //檢查SESSION是否啟動
        $_SESSION['check_word'] = ''; //設置存放檢查碼的SESSION

    //設置定義為圖片
    header("Content-type: image/PNG");

    /*
      imgcode($nums,$width,$high)
      設置產生驗證碼圖示的參數
      $nums 生成驗證碼個數
      $width 圖片寬
      $high 圖片高
    */
    imgcode(5,120,30);

    //imgcode的function
    function imgcode($nums,$width,$high) {
       
        //去除了數字0和1 字母小寫O和L，為了避免辨識不清楚
        $str = "23456789abcdefghijkmnpqrstuvwxyzABCDEFGHIJKLMOPQRSTUBWXYZ";
        $code = '';
        for ($i = 0; $i < $nums; $i++) {
            $code .= $str[mt_rand(0, strlen($str)-1)];
        }

        $_SESSION['check_word'] = $code;

        //建立圖示，設置寬度及高度與顏色等等條件
        $image = imagecreate($width, $high);
        $black = imagecolorallocate($image, mt_rand(0, 200), mt_rand(0, 200), mt_rand(0, 200));
        $border_color = imagecolorallocate($image, 21, 106, 235);
        $background_color = imagecolorallocate($image, 235, 236, 237);

        //建立圖示背景
        imagefilledrectangle($image, 0, 0, $width, $high, $background_color);

        //建立圖示邊框
        imagerectangle($image, 0, 0, $width-1, $high-1, $border_color);

        //在圖示布上隨機產生大量躁點
        for ($i = 0; $i < 80; $i++) {
            imagesetpixel($image, rand(0, $width), rand(0, $high), $black);
        }
       
        $strx = rand(3, 8);
        for ($i = 0; $i < $nums; $i++) {
            $strpos = rand(1, 6);
            imagestring($image, 5, $strx, $strpos, substr($code, $i, 1), $black);
            $strx += rand(10, 30);
        }

        imagepng($image);
        imagedestroy($image);
    }
?>














<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <script type="text/javascript">
            function timedMsg()
            {   
                Swal.fire({
                position: 'center',
                icon: 'success',
                title: '登入成功',
                showConfirmButton: false,
                timer: 1000
            })
            }
        </script>
        
</body>
</html>